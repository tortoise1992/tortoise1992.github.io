(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{RRHj:function(e,t,n){"use strict";n.r(t);n("y0Ah");var a=n("6Pug"),i=(n("Ua21"),n("gso0")),l=n("43Yg"),r=n.n(l),s=n("/tCh"),o=n.n(s),c=n("scpF"),d=n.n(c),u=n("O/V9"),h=n.n(u),p=n("8aBX"),f=n.n(p),m=n("+ufk"),k=n.n(m),v=(n("Cfao"),n("YB9l")),y=(n("cRC3"),n("Vkns")),b=(n("wY20"),n("Z+BW")),C=(n("RY6i"),n("iM+h")),g=C["a"].TreeNode,E=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),n.state={menus:[],checkedKeys:[]},n.renderTreeNodes=function(e){return e.map(function(e){return e.children?k.a.createElement(g,{title:e.title,key:e._id,dataRef:e},n.renderTreeNodes(e.children)):k.a.createElement(g,e)})},n.handleChecked=function(e){n.setState({checkedKeys:e},function(){var t=JSON.parse(JSON.stringify(n.props.editData));t.permission=e,n.props.changeCheck(t)})},n}return f()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem("userInfo")){var t=JSON.parse(localStorage.getItem("userInfo")).menu;this.setState({menus:t},function(){e.setState({checkedKeys:e.props.editData.permission})})}}},{key:"render",value:function(){return k.a.createElement("div",{style:{padding:20}},k.a.createElement(C["a"],{checkable:!0,showLine:!0,blockNode:!0,checkedKeys:this.state.checkedKeys,onCheck:this.handleChecked},this.renderTreeNodes(this.state.menus)))}}]),t}(m["Component"]),S=b["a"].TabPane,w=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),n.state={roles:[{role:"admin",title:"\u8d85\u7ea7\u7ba1\u7406\u5458",permission:["1","2","3"]},{role:"vip",title:"Vip\u7528\u6237",permission:["1","2"]}],tabIndex:"0",editData:null},n.handleDeleteRole=function(){y["a"].confirm({title:"\u5220\u9664\u89d2\u8272",content:"\u786e\u8ba4\u5220\u9664\u8be5\u89d2\u8272\u5417\uff1f",cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){v["a"].success("\u5220\u9664\u6210\u529f")}})},n.handleTabsChange=function(e){n.setState({tabIndex:e,editData:n.state.roles[Number(e)]})},n.handlechangeCheck=function(e){n.setState({editData:e})},n.handleSave=function(){v["a"].success("\u4fdd\u5b58\u6210\u529f".concat(JSON.stringify(n.state.editData)))},n}return f()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.setState({tabIndex:"0",editData:this.state.roles[0]})}},{key:"render",value:function(){var e=this;return k.a.createElement(b["a"],{defaultActiveKey:this.state.tabIndex,tabPosition:"left",tabBarStyle:{width:230},onChange:this.handleTabsChange},this.state.roles.map(function(t,n){return k.a.createElement(S,{tab:k.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.title,k.a.createElement(i["a"],{onClick:e.handleDeleteRole,size:"small",type:"danger"},"\u5220\u9664")),key:n},k.a.createElement("div",{style:{minHeight:500,position:"relative"}},String(n)===e.state.tabIndex?k.a.createElement(E,{defaultIndex:String(n),tabIndex:e.state.tabIndex,editData:e.state.editData,changeCheck:e.handlechangeCheck}):null,k.a.createElement("div",{style:{position:"absolute",width:"100%",bottom:0,left:0,textAlign:"right"}},k.a.createElement(i["a"],{onClick:e.handleSave,type:"primary"},"\u4fdd\u5b58"))))}))}}]),t}(m["Component"]),D=(n("sblf"),n("50ty")),O=(n("9udC"),n("oPYk")),x=O["a"].Item,I=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),n.onOk=function(){n.props.form.validateFields(function(e,t){e||(v["a"].success(JSON.stringify(t)),n.props.form.resetFields(),n.props.handleOk())})},n.onCancel=function(){n.props.form.resetFields(),n.props.handleCancel()},n}return f()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}};return k.a.createElement(y["a"],{title:"\u65b0\u589e\u89d2\u8272",visible:this.props.visible,onCancel:this.onCancel,onOk:this.onOk},k.a.createElement(O["a"],t,k.a.createElement(x,{label:"\u89d2\u8272\u540d\u79f0"},e("roleName",{initialValue:"",rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(k.a.createElement(D["a"],null))),k.a.createElement(x,{label:"\u89d2\u8272\u4ee3\u53f7"},e("roleCode",{initialValue:"",rules:[{required:!0,message:"\u89d2\u8272\u4ee3\u53f7\u4e0d\u80fd\u4e3a\u7a7a"}]})(k.a.createElement(D["a"],null)))))}}]),t}(m["Component"]),N=O["a"].create()(I);n.d(t,"default",function(){return A});var A=function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=d()(this,(e=h()(t)).call.apply(e,[this].concat(i))),n.state={visible:!1},n.handleAdd=function(){n.setState({visible:!0})},n.handleOk=function(){n.setState({visible:!1,editData:null})},n.handleCancel=function(){n.setState({visible:!1,editData:null})},n}return f()(t,e),o()(t,[{key:"render",value:function(){return k.a.createElement(a["a"],{title:"\u6743\u9650\u7ba1\u7406",extra:k.a.createElement(i["a"],{onClick:this.handleAdd,type:"primary",icon:"plus"},"\u65b0\u589e\u89d2\u8272")},k.a.createElement(w,null),k.a.createElement(N,{visible:this.state.visible,handleOk:this.handleOk,handleCancel:this.handleCancel}))}}]),t}(m["Component"])}}]);